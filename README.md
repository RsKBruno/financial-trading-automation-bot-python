**README.md**  

---  

# Financial Trading Automation Bot ü§ñüí∏  

![Python](https://img.shields.io/badge/Python-3.8+-blue)  
![MetaTrader5](https://img.shields.io/badge/MetaTrader5-active-brightgreen)  

### This project automates operations in the financial market by **integrating two leading tools**:  
- **TradingView**: Global platform for asset analysis, real-time charts, and technical alert generation (e.g., signals based on indicators like SAR or MACD).  
- **MetaTrader 5 (MT5)**: Professional platform for executing orders in markets such as forex, stocks, and commodities, featuring advanced position management tools.  

The robot serves as an **intelligent bridge** between these technologies:  
1. **Receives alerts from TradingView** via webhooks (notifications in JSON format).  
2. **Processes real-time signals** (e.g., `SarBUY` for buy or `SarSELL` for sell).  
3. **Executes orders on MT5** automatically, reducing manual errors and ensuring rapid response.  
4. **Manages risks**: Closes positions via stop loss or trend reversals.  

---  

## üõ†Ô∏è Prerequisites  
1. **MetaTrader 5**: Installed and configured.  
2. **Python 3.8+**: With libraries:  
   ```bash  
   pip install flask MetaTrader5 pytz  
   ```  
3. **Ngrok**: To expose the local server to the internet (tutorial [here](https://ngrok.com/docs)).  

---  
## üöÄ Setup + Step-by-step to start testing.  
1. **TradingView**:  
- Save the strategies provided in Pine Script (TradingView‚Äôs programming language for creating strategies) directly on the platform, ensuring compatibility with the project.  
- Pay attention to the Ngrok usage instructions detailed in topic 3 below. They are essential to ensure that everything works correctly.
  - A specific link (generated by Ngrok) will be provided for you to copy and paste into the alerts created in TradingView.
  - For more details on the setup, refer to the complete explanations in the Ngrok section.

---  
2. **MetaTrader 5**:  
- Create a demo account with a broker of your choice. The strategies provided for the project are focused on Forex currency pairs.  
- Enable the API in MT5 to allow integration with Python. To do so, open MT5 and follow the path: (`Tools > Options > API`).  

---  
3. **Ngrok**:  
     A tool that exposes your local Flask server to the internet, allowing TradingView to send alerts to your machine.  
   - **Step-by-step**:  
     1. **Install Ngrok**:  
        Download from [https://ngrok.com](https://ngrok.com) and follow the installation instructions.  
     2. **Run the command**:  
        ```bash  
        ngrok http 5000  # Creates a tunnel for Flask (port 5000)  
        ```  
        - Copy the generated public address (e.g., `https://abcd1234.ngrok.io`).  
     3. **Configure TradingView**:  
        - Paste the address into the alert‚Äôs webhook field:  
          ```  
          https://abcd1234.ngrok.io/tradingview  
          ```  
        - Note that at the end of the public link provided by Ngrok, you need to add the text `tradingview` because in our Python script we specified it in Flask  
          `@app.route('/tradingview', methods=['GET', 'POST'])`
     4. **Test**:  
        - Trigger an alert in TradingView and check if Flask responds (using terminal logs).  

   - **Tip**:  
     - The Ngrok link changes with each restart. Update the TradingView webhook if necessary.  
     - Use the free version for testing, but consider alternatives (e.g., Cloudflare Tunnel) for production.  

---  
4. **Flask Server/Python Script**:  
    - Run the Python script and verify that logs are being generated in the terminal after alerts send signals.  

---  
5. **Note**:  
    - Soon, I will release a self-explanatory video with all the details and a step-by-step guide on integrating the technologies used.  

---  
### üéØ **Editable Parameters**  
---  
#### **1. Signal Customization**  
- **Alert Names**:  
  - Modify the values `SarBUY`, `SarSELL`, `Close entry`, etc., **directly in TradingView** to create unique strategies.  
  - Custom alert example:  
    ```python
    # In TradingView:
    alertcondition(condition, title="My_Custom_Signal", message="Buy_MACD")
    ```  
    In the code, simply update the conditions in `home()` to reflect the new name and logic you desire.  

#### **2. Technical Settings**  
- **Volume**:  
  ```python
  # In the sending_order and close_position functions
  'volume': 1.0  # Adjust for micro accounts (e.g., 0.1) or standard accounts (e.g., 10.0)
  ```  
- **Slippage (tolerance)**:  
  ```python
  # In the sending_order and close_position functions
  'deviation': 30  # Reduce in volatile markets (e.g., 10 points)
  ```  

#### **3. Base for Your Own Strategies**  
- **Expand the logic**:  
  - Add new `elif` clauses in `home()` to process signals like `MACD_Buy` or `RSI_Sell`.  
  - Example extension:  
    ```python
    elif webhook['order_type'] == 'MACD_Buy':
        sending_order_macd(webhook)  # New function for MACD 
    ```  
- **Risk Management**:  
  - Integrate a dynamic `stop loss` using `mt5.symbol_info_tick().ask` or `bid`.

---  

## üìö Technical Documentation  
### Data Flow:  
1. **Receiving Signals**:  
   ```python  
   @app.route('/tradingview', methods=['POST'])  
   def home():  
       # Processes JSON from TradingView and decides on actions  
   ```  
2. **Opening an Order**:  
   ```python  
   def sending_order(data):  
       # Sets parameters such as price (ask/bid), magic (identifier), and order price slippage tolerance  
   ```  
3. **Closing a Position**:  
   ```python  
   def close_position(data, position_close):  
       # Closes specific orders using the position ticket and magic=100  
   ```  

---  

## ‚ö†Ô∏è Limitations  
- **Simultaneous Positions**: Does not manage multiple orders on the same asset.  
- **Testing**: It is recommended to use demo accounts.  

---  

## üìÑ License  
MIT License ‚Äì See the `LICENSE` file for details.  

---  

## üìû Support  
- Report bugs or questions to improve the project.  
- **Legal Notice**:  
  - This project and the provided scripts **are solely for educational purposes**.  
  - Operations in the financial market involve **significant financial risks**, including the possibility of losses exceeding the invested capital.  
  - **It is recommended to use a demo account** for testing, according to safety practices recommended by industry regulations.  
  - The author **is not responsible for investment decisions** based on this project.  

---  

**Author**: Bruno Alves  
**Last Updated**: 16/03/2025  

---